# 🎲 Dicee Battle - Ultimate Dice Game

A modern, full-featured dice battle game with user authentication, real-time statistics, and beautiful animations. Built with Node.js, Express, and vanilla JavaScript.

![Dicee Battle](https://img.shields.io/badge/Game-Dicee%20Battle-blue?style=for-the-badge&logo=game)
![Node.js](https://img.shields.io/badge/Node.js-v16+-green?style=for-the-badge&logo=node.js)
![Express](https://img.shields.io/badge/Express-4.18+-blue?style=for-the-badge&logo=express)
![SQLite](https://img.shields.io/badge/SQLite-3.0+-orange?style=for-the-badge&logo=sqlite)

## 🌟 Features

### 🎮 Game Features
- **Interactive Dice Rolling**: Beautiful animated dice with realistic physics
- **Score Tracking**: Real-time score updates with visual effects
- **Round Counter**: Track game progress with detailed round information
- **Winner Animations**: Celebratory effects with particles and crown displays
- **Game Statistics**: Persistent player statistics across sessions
- **Keyboard Controls**: Space to roll, R to reset for enhanced gameplay

### 🔐 Authentication System
- **User Registration**: Secure account creation with validation
- **Login System**: Session-based authentication with persistent sessions
- **Password Reset**: Email-based password recovery system
- **Session Management**: Secure session handling with auto-logout
- **Input Validation**: Comprehensive client and server-side validation

### 🎨 Modern UI/UX
- **Responsive Design**: Works perfectly on desktop, tablet, and mobile
- **Gradient Backgrounds**: Beautiful animated gradient backgrounds
- **Floating Particles**: Dynamic particle effects for immersion
- **Smooth Animations**: CSS transitions and keyframe animations
- **Modern Typography**: Clean, readable fonts with proper hierarchy
- **Visual Feedback**: Loading states, success/error messages

### 🚀 Performance & Security
- **Compression**: Gzip compression for faster loading
- **Caching**: Static file caching for improved performance
- **Security Headers**: XSS protection, content type validation
- **Input Sanitization**: SQL injection and XSS prevention
- **Session Security**: HTTP-only cookies, CSRF protection

## 📋 Prerequisites

- **Node.js**: Version 16.0 or higher
- **NPM**: Version 8.0 or higher
- **Email Service** (optional): For password reset functionality

## 🛠️ Installation & Setup

### Local Development

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd dicee-battle-game
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Start the development server**
   ```bash
   npm run dev
   ```

4. **Access the application**
   - Open your browser and navigate to `http://localhost:3000`
   - Create an account or log in to start playing

### Production Setup

1. **Install dependencies**
   ```bash
   npm install --production
   ```

2. **Set environment variables**
   ```bash
   export NODE_ENV=production
   export SESSION_SECRET=your-super-secret-session-key
   # Optional: For email functionality
   export SMTP_HOST=your-smtp-host
   export SMTP_USER=your-email@domain.com
   export SMTP_PASS=your-email-password
   export FROM_EMAIL=noreply@yourdomain.com
   ```

3. **Start the server**
   ```bash
   npm start
   ```

## 🌐 Render.com Deployment

This application is optimized for deployment on Render.com with zero configuration required.

### Automatic Deployment

1. **Connect your repository** to Render.com
2. **Select "Web Service"** as the service type
3. **Use the included `render.yaml`** configuration (automatic detection)
4. **Deploy** - Render will automatically:
   - Install dependencies
   - Set up the database
   - Configure environment variables
   - Start the application

### Manual Deployment

1. **Create a new Web Service** on Render.com
2. **Configure the service**:
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Environment**: Node
   - **Plan**: Free (or higher for production)

3. **Set Environment Variables**:
   ```
   NODE_ENV=production
   SESSION_SECRET=<auto-generated>
   SMTP_HOST=<your-smtp-host>
   SMTP_USER=<your-email>
   SMTP_PASS=<your-password>
   FROM_EMAIL=noreply@yourdomain.com
   ```

4. **Deploy** and access your application at the provided URL

### Email Configuration

For password reset functionality, configure SMTP settings in Render dashboard:

**Gmail SMTP** (recommended for testing):
- SMTP_HOST: `smtp.gmail.com`
- SMTP_PORT: `587`
- SMTP_SECURE: `false`
- SMTP_USER: `your-gmail@gmail.com`
- SMTP_PASS: `your-app-password` (not your regular password)

**Other providers**:
- **SendGrid**: Professional email service
- **Mailgun**: Developer-friendly email API
- **AWS SES**: Cost-effective enterprise solution

## 📁 Project Structure

```
dicee-battle-game/
├── 📄 server.js                 # Main server file
├── 📄 index.html                # Game interface
├── 📄 login.html                # Login page
├── 📄 signup.html               # Registration page
├── 📄 forgot-password.html      # Password reset request
├── 📄 reset-password.html       # Password reset form
├── 📄 index.js                  # Game logic & interactions
├── 📄 styles.css                # Styling & animations
├── 📄 package.json              # Dependencies & scripts
├── 📄 render.yaml               # Render.com configuration
├── 📁 images/                   # Dice images
│   ├── dice1.png               # Dice face 1
│   ├── dice2.png               # Dice face 2
│   ├── dice3.png               # Dice face 3
│   ├── dice4.png               # Dice face 4
│   ├── dice5.png               # Dice face 5
│   └── dice6.png               # Dice face 6
└── 📄 users.db                  # SQLite database (auto-created)
```

## 🎮 How to Play

1. **Create Account**: Register with username, email, and password
2. **Login**: Access your personal game dashboard
3. **Roll Dice**: Click "Roll Dice" or press spacebar
4. **Score Points**: Higher roll wins points equal to the roll value
5. **Track Progress**: View real-time statistics and game history
6. **Win Condition**: First to reach 50 points wins the game
7. **New Game**: Reset anytime with the "New Game" button

## 🔧 API Endpoints

### Authentication
- `POST /api/signup` - User registration
- `POST /api/login` - User login
- `POST /api/logout` - User logout
- `GET /api/user` - Get current user info

### Game Management
- `GET /api/stats` - Get user's game statistics
- `POST /api/stats` - Save game statistics

### Password Recovery
- `POST /api/forgot-password` - Request password reset
- `POST /api/reset-password` - Reset password with token

### System
- `GET /health` - Health check endpoint

## 📊 Database Schema

### Users Table
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### Game Statistics Table
```sql
CREATE TABLE game_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    player1_wins INTEGER DEFAULT 0,
    player2_wins INTEGER DEFAULT 0,
    draws INTEGER DEFAULT 0,
    total_games INTEGER DEFAULT 0,
    FOREIGN KEY (user_id) REFERENCES users (id)
);
```

### Password Resets Table
```sql
CREATE TABLE password_resets (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    token TEXT UNIQUE NOT NULL,
    expires_at DATETIME NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users (id)
);
```

## 🔒 Security Features

- **Password Hashing**: bcryptjs with 12 salt rounds
- **Session Security**: HTTP-only cookies, SameSite protection
- **Input Validation**: Server and client-side validation
- **SQL Injection Prevention**: Parameterized queries
- **XSS Protection**: Content sanitization
- **CSRF Protection**: SameSite cookie configuration
- **Rate Limiting**: Natural rate limiting through game mechanics

## 🚀 Performance Optimizations

- **Compression**: Gzip compression for all responses
- **Static Caching**: Browser caching for static assets
- **Database Optimization**: Indexed queries and connection pooling
- **Memory Management**: Optimized garbage collection
- **Minification**: CSS and JavaScript optimization
- **CDN Assets**: External font and icon libraries

## 🛠️ Troubleshooting

### Common Issues

**1. Database Connection Errors**
```bash
# Ensure write permissions
chmod 755 .
chmod 644 users.db
```

**2. Email Not Sending**
- Verify SMTP environment variables
- Check firewall settings
- Use app-specific passwords for Gmail

**3. Session Issues**
- Clear browser cookies
- Check SESSION_SECRET environment variable
- Restart the server

**4. Static Files Not Loading**
- Verify file paths are correct
- Check image files exist in `/images` directory
- Ensure proper MIME types

### Development Debugging

**Enable Debug Mode**:
```bash
DEBUG=* npm run dev
```

**Check Logs**:
- Server logs in console
- Browser developer tools
- Network tab for API requests

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## � License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 👨‍💻 Author

**Vishal Gowrav**
- Enhanced with modern UI/UX design
- Optimized for performance and security
- Deployed on Render.com

## 🎉 Acknowledgments

- Dice images from public domain resources
- Font Awesome for beautiful icons
- Google Fonts for typography
- Render.com for hosting platform

---

<div align="center">

**🎲 Ready to Roll? [Play Now!](https://your-app-url.onrender.com) 🎲**

Made with ❤️ and ☕ by Vishal Gowrav

</div>